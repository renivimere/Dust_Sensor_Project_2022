# Dust_Sensor_Project_2022
EE3491 HUST  
Programming Techniques  
Le Minh Quan

## Overview
The program uses the C language with appropriate functions and data structures to simulate PM2.5 dust sensor data, measuring the concentration of dust particles smaller than 2.5 microns in the air.

- **Measurement range:** 0 √∑ 600 ùúág/m¬≥
- **Resolution:** 0.1 ùúág/m¬≥

## Features

### [Task 1: Data Generation Program](/task_1)

A program capable of outputting a dataset including the sensor ID, simulated measurement timestamp, and simulated sensor values. The simulation start time is the current time obtained from the system clock (the computer's current time) minus the simulation duration.

#### Command-line Usage

The user needs to run the program on the command-line with the following format:

```console
dust_sim ‚Äìn [num_sensors] ‚Äìst [sampling] ‚Äìsi [interval]
```



Where:
- **`dust_sim`** is the name of the compiled program file.
- **`-n [num_sensors]`** is a pair of input parameters to specify the number of sensors. `[num_sensors]` should be replaced by a specific positive integer. **The program will not run if only one of these two parameters is provided or if the specified number of sensors is invalid. If both parameters are missing, the program will default to 1 sensor and display a message on the screen.**
- **`-st [sampling]`** is a pair of parameters to specify the sampling time with `[sampling]` replaced by a positive integer in seconds. The minimum allowed sampling time is 1 second. **The program will not run and will display an error message if only one of these two parameters is provided. If both parameters are missing, the program will default to a sampling frequency of 30 seconds.**
- **`-si [interval]`** is a pair of parameters to specify the measurement interval with `[interval]` replaced by a positive integer in hours. The minimum simulation duration is 1 hour. **The program will not run and will display an error message if only one of these two parameters is provided. If both parameters are missing, the program will default to a measurement interval of 24 hours.**
- **If the user provides incorrect syntax, invalid parameters, or errors that do not fall into the aforementioned default cases, the program will not run and will display an error message. The error code will be logged into the file `task1.log` as `Error 01: invalid command & argument`.**

Example usage:

```console
dust_sim -n 5 -st 10 -si 2
```

This command will run the program with 5 sensors, a sampling time of 10 seconds, and a measurement interval of 2 hours.

#### Data Generation

If the user provides a valid command, the program will execute and generate a dataset consisting of the sensor ID, simulated measurement timestamp, and simulated sensor values. The simulation start time is the current system time minus the specified simulation duration.

- Sensor IDs range from 1 to `num_sensors`, where `num_sensors` is the number of sensors provided by the user in the command-line.
- The simulation timestamp follows the format `YYYY:MM:DD hh:mm:ss`.
- Simulated measurement values are randomly generated floating-point numbers with one decimal place of precision.
- The simulated data will be saved to a file named `dust_sensor.csv`. If the file already exists, it will overwrite the existing file. The file follows the CSV format, where fields are separated by commas.
- **If the program encounters an error while attempting to overwrite an existing file named `dust_sensor.csv`, it will log the error into `task1.log` as `Error 03: denied access dust_sensor.csv`.**

### Task 2: Data Processing Program

This program is designed to process data obtained from dust sensors. It performs various operations on the input data to filter outliers, calculate average dust concentrations, convert them to Air Quality Index (AQI), and provide pollution level warnings.

#### Command-line Usage

The user needs to run the program on the command-line with the following format:

```console
dust_process [data_filename.csv]
```


Where:
- **`dust_process`** represents the compiled program filename.
- **`[data_filename.csv]`** denotes the CSV file containing dust sensor data, structured similarly to the `dust_sensor.csv` file from Task 1.
- **If the user fails to provide a filename and only enters `C:\\dust_process`, the program will default to using the filename `dust_sensor.csv`, which was generated by the [**task_1**](/task_1) program.**
- **In case of invalid command syntax, excluding the default case, the program won't execute and will log an error into `task2.log` with error code `Error 00: invalid command`.**
- **If the input file `data_filename.csv` does not exist or cannot be accessed, the program will log an error into `task2.log` with error code `Error 01: file not found or cannot be accessed`.**

- **If the input file `data_filename.csv` does not have the extension CSV or does not have the same format as the `dust_sensor.csv` file in Task 1 as specified, the program will log an error into `task2.log` with error code `Error 02: invalid csv file`.**




